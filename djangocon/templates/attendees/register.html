{% extends 'base.html' %}

{% block title %}Register{% endblock title %}

{% block extra_js %}
	<script type="text/javascript" src="{{ STATIC_URL }}js/jquery.infieldlabel.js"></script>
	<script type="text/javascript">
        $(document).ready(function() {
				// back button might leave us with a form that is filled in,
				// but with necessary blocks not visible.
				{% for t in voucher_tickets %}
					if($('#id_ticket_type').val() == {{ t.id }}) {
						$('#fieldset_attendees_register_voucher').show();						
					}
				{% endfor %}
				{% for t in vat_tickets %}
					if($('#id_ticket_type').val() == {{ t.id }}) {
						$('#fieldset_attendees_vat_details').show();
					}
				{% endfor %}
				
				$('#id_ticket_type').change(function() {
					$('#fieldset_attendees_register_voucher').hide()
					$('#fieldset_attendees_vat_details').hide()
				{% for t in voucher_tickets %}
					if($(this).val() == {{ t.id }}) {
						$('#fieldset_attendees_register_voucher').fadeIn('fast');
						
					}
				{% endfor %}
				{% for t in vat_tickets %}
					if($(this).val() == {{ t.id }}) {
						$('#fieldset_attendees_vat_details').fadeIn('fast');
					}
				{% endfor %}
				});
				$('.formrow.infield>label').addClass('infield').inFieldLabels();
	            $('#formerrors').fadeIn(1000);
	        });
	    </script>
{% endblock extra_js %}

{% block content %}
    <div class="container_12 clearfix">
        <section class="grid_7 suffix_1" id="tickets_register">
            <h1>Register for DjangoCon Europe 2010</h1>
            {% if not ticketblock or not ticketblock.open %}
                <ul class="errorlist"><li>We are sold out at the moment. Sorry!</li></ul>
            {% else %}
                {{ form.non_field_errors }}
                <form action="." method="POST" accept-charset="utf-8" id="form-attendees-register">
                    <fieldset id="fieldset_attendees_register_ticket">
						<legend>Ticket Type</legend>
						<p>
							<strong>Not sure which ticket to purchase?</strong> Consult the guidelines in the sidebar (to the right).
							This is a community-supported conference; <strong>please be honest when choosing a ticket type</strong>.
						</p>
                        <div class="formrow clearfix">
                            {{ form.ticket_type.label_tag }}
                            {{ form.ticket_type.errors }}
                            {{ form.ticket_type }}
                        </div>
                    </fieldset>
                    <fieldset id="fieldset_attendees_register_contact">
                        <legend>Contact details</legend>
                        <div class="formrow infield clearfix">
                            {{ form.first_name.label_tag }}
                            {{ form.first_name.errors }}
                            {{ form.first_name }}
                        </div>
                        <div class="formrow infield clearfix">
                            {{ form.last_name.label_tag }}
                            {{ form.last_name.errors }}
                            {{ form.last_name }}
                        </div>
                        <div class="formrow infield clearfix">
                            {{ form.email.label_tag }}
                            {{ form.email.errors }}
                            {{ form.email }}
                        </div>
                    </fieldset>
                    <fieldset id="fieldset_attendees_register_voucher">
                        <legend>Student-Rate Voucher</legend>
                        <div class="formrow infield clearfix">
                            {{ form.voucher.label_tag }}
                            {{ form.voucher.errors }}
                            {{ form.voucher }}
                        </div>
                    </fieldset>
                    <fieldset id="fieldset_attendees_vat_details">
                        <legend>EU VAT Details</legend>
                        <div class="formrow infield clearfix">
                            {{ form.vat_id.label_tag }}
                            {{ form.vat_id.errors }}
                            {{ form.vat_id }}
                        </div>
                    </fieldset>
					<p>
						<strong>Ticket purchases are processed via PayPal.</strong> Upon submission, you will be redirected to PayPal's
						servers to provide your payment information, and will be returned here once your payment
						details have been processed.
					</p>
                    <p><input type="submit" value="Submit" id="ticket_submit"></p>
                </form>
            {% endif %}
        </section>
        <section class="grid_4 sidebar" id="tickets_register">
            <h1>Additional Information</h1>
			<h2>Which rate should I pay?</h2>
			<p>
				The short answer: if you are paying your own way to the conference, select <strong>Hobbyist</strong>. If
				your employer is paying for you to attend DjangoCon, select <strong>Corporate</strong>.
			</p>
            <h2>Student rate</h2>
            <p>
                The student rate is for full-time students only and is limited in number. Academics and employees of
				non-profits should register at the normal rates, depending on whether you are paying your own way to
				the conference (see above).
            </p>
			<p>
				To purchase a student ticket, <a href="mailto:feedback@djangocon.eu">contact us</a> to apply for a voucher to enable the ticket.
				You will need to submit proof of your student status; a current timetable or valid student ID card will suffice.
			</p>
            <h2>Corporate rate</h2>
            <p>
                Reimbursement / tax receipts for companies are only available at this rate. Included in your ticket purchase is
				the warm fuzzy feeling of knowing you enabled more students to afford their attendance fee <em>and</em> food for the month.
            </p>
            <h2>VAT-Free Corporate Rate</h2>
            <p>
                European companies can fill in their VAT-ID and choose the VAT-free business ticket. We can only provide VAT-free
				tickets if the stated VAT-ID can be validated.
            </p>
        </section>
    </div>
{% endblock content %}